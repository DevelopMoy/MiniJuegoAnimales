(()=>{"use strict";function c(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function j(i,a){var b;if("undefined"==typeof Symbol||null==i[Symbol.iterator]){if(Array.isArray(i)||(b=f(i))||a&&i&&"number"==typeof i.length){b&&(i=b);var c=0,d=function(){};return{s:d,n:function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}},e:function(b){throw b},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var j,k=!0,g=!1;return{s:function(){b=i[Symbol.iterator]()},n:function(){var c=b.next();return k=c.done,c},e:function(b){g=!0,j=b},f:function a(){try{k||null==b["return"]||b["return"]()}finally{if(g)throw a}}}}function f(e,f){if(e){if("string"==typeof e)return d(e,f);var b=Object.prototype.toString.call(e).slice(8,-1);return"Object"===b&&e.constructor&&(b=e.constructor.name),"Map"===b||"Set"===b?Array.from(e):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?d(e,f):void 0}}function d(e,a){(null==a||a>e.length)&&(a=e.length);for(var b=0,c=Array(a);b<a;b++)c[b]=e[b];return c}function e(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function g(e,a){for(var b,c=0;c<a.length;c++)b=a[c],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}function b(d,a,b){return a&&g(d.prototype,a),b&&g(d,b),d}function h(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function k(e,a){for(var b,c=0;c<a.length;c++)b=a[c],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}function l(d,a,b){return a&&k(d.prototype,a),b&&k(d,b),d}var m=["mono","ave","ara\xF1a","oso","ornitorrinco","pez","cangrejo","dinosaurio","rana"],n=function d(a){c(this,d),this.idAnim=a,this.id,this.animalImg="../assets/animales/pics/p".concat(this.idAnim,".png"),this.animalHabit="../assets/animales/hab/h".concat(this.idAnim,".jpg"),this.animalSound="../assets/animales/sound/s".concat(this.idAnim,".mp3"),this.nombre=m[this.idAnim-1]};var a=function(){function d(a){var b=this;e(this,d),this.puntosLocales=0,this.areaJuego=document.querySelector("#areaJuego"),this.areaAnimal=document.querySelector("#areaAnimal"),this.butonNuevoJuego=document.querySelector("#nuevoJuego"),this.butonHome=document.querySelector("#home"),this.areaHabitat=document.querySelector("#areaHabitat"),this.puntos=0,this.animalesActuales=[],this.mono=a,this.myInterval=setInterval(function(){var c=document.querySelector("#areaPuntuac");c&&3==c.innerHTML&&((document.querySelector("#puntLocales").innerHTML=parseInt(document.querySelector("#puntLocales").innerHTML)+1,b.mono.dibujarMono(1),localStorage.getItem("puntos"))?localStorage.setItem("puntos",parseInt(localStorage.getItem("puntos"))+1):(console.log("no existe"),localStorage.setItem("puntos",1 .toString())),b.iniciarNuevoJuego())},1e3)}return b(d,[{key:"monoReposo",value:function(){console.log("mono dejo de bailar"),console.log(this),this.mono.dibujarMono(0)}},{key:"dragStartFunc",value:function(b){b.dataTransfer.setData("Text",b.target.id)}},{key:"prepararJuegoPanel",value:function(){var c=this;this.areaJuego.innerHTML="\n            <div id=\"areaPuntuac\"></div>\n            <div id=\"areaHabitat\"></div>\n            <div id=\"areaAnimal\"></div>",this.areaAnimal=document.querySelector("#areaAnimal"),this.areaHabitat=document.querySelector("#areaHabitat"),clearInterval(this.myInterval),this.myInterval=setInterval(function(){var a=document.querySelector("#areaPuntuac");a&&3==a.innerHTML&&((document.querySelector("#puntLocales").innerHTML=parseInt(document.querySelector("#puntLocales").innerHTML)+1,c.mono.dibujarMono(1),localStorage.getItem("puntos"))?localStorage.setItem("puntos",parseInt(localStorage.getItem("puntos"))+1):(console.log("no existe"),localStorage.setItem("puntos",1 .toString())),c.iniciarNuevoJuego())},1e3)}},{key:"eventoOnDropHabitat",value:function(f){f.preventDefault();var a=f.dataTransfer.getData("Text"),b=a.charAt(a.length-1),c=f.target.id.charAt(f.target.id.length-1);if(b==c){document.querySelector("#snd"+b).play();var d=document.querySelector("#areaPuntuac");document.querySelector("#"+a).classList.add("disabledImg"),document.querySelector("#tituloAnim"+b).classList.remove("hiddenImg"),d.innerHTML=parseInt(d.innerHTML)+1}else document.querySelector("#sonidoError").play(),document.querySelector("#botonEnojado").click()}},{key:"funcionEnojado",value:function(){var b=this.mono;setTimeout(function(){b.dibujarMono(0)},4e3)}},{key:"eventoOnDragOverHabitat",value:function(b){b.preventDefault()}},{key:"eventoOnDragEnter",value:function(b){document.querySelector("#".concat(b.target.id)).classList.add("dragEnter")}},{key:"eventoOnDragLeave",value:function(b){document.querySelector("#".concat(b.target.id)).classList.remove("dragEnter")}},{key:"dibujarAnimales",value:function(){var e,f=j(this.animalesActuales);try{for(f.s();!(e=f.n()).done;){var a=e.value,b=document.createElement("div");b.classList.add("animalObj"),b.ondragstart=this.dragStartFunc,b.innerHTML="\n                <img draggable=\"true\" id=\"pers".concat(a.idAnim,"\" src=\"").concat(a.animalImg,"\">\n                <h1 id=\"tituloAnim").concat(a.idAnim,"\" class=\"hiddenImg subtitulo\">").concat(a.nombre,"</h1>\n            "),this.areaAnimal.append(b)}}catch(b){f.e(b)}finally{f.f()}}},{key:"dibujarHabitats",value:function(){var i,a=[],b=j(this.animalesActuales);try{for(b.s();!(i=b.n()).done;){var c=i.value;a.push(c)}}catch(c){b.e(c)}finally{b.f()}a.sort(function(){return Math.random()-.5});for(var h=0,d=a;h<d.length;h++){var e=d[h],f=document.createElement("div");f.ondrop=this.eventoOnDropHabitat,f.ondragover=this.eventoOnDragOverHabitat,f.ondragenter=this.eventoOnDragEnter,f.ondragleave=this.eventoOnDragLeave,f.classList.add("habitatObj"),f.innerHTML="\n                <img id=\"hab".concat(e.idAnim,"\" src=\"").concat(e.animalHabit,"\">\n            "),this.areaHabitat.append(f)}}},{key:"prepararAnimales",value:function(){var c=[1,2,3,4,5,6,7,8,9];c.sort(function(){return Math.random()-.5});for(var a=0;3>a;a++)this.animalesActuales.push(new n(c.pop()))}},{key:"reiniciarPuntos",value:function(){var b=document.querySelector("#areaPuntuac");b&&(b.innerHTML=0)}},{key:"pantallaInicio",value:function(){this.areaJuego.innerHTML="";var c=document.createElement("div"),a=localStorage.getItem("puntos");c.classList.add("homeView"),c.innerHTML="\n            <h1 id=\"titulo\">Animalia</h1>  \n            <h3>Puntos: ".concat(a,"</h3>\n        "),this.areaJuego.append(c)}},{key:"dibujaPantallaGanado",value:function(){this.areaJuego.innerHTML="";var b=document.createElement("div");b.innerHTML="\n            <h1 id=\"titulo\">Has ganado</h1>  \n        ",this.areaJuego.append(b)}},{key:"iniciarNuevoJuego",value:function(){console.log(document.querySelector("#puntLocales").innerHTML);var b=this.mono;document.querySelector("#botonEnojado").addEventListener("click",function(){b.dibujarMono(2),setTimeout(function(){b.dibujarMono(0)},4e3)}),this.areaJuego.innerHTML="",this.prepararJuegoPanel(),this.areaHabitat&&(this.areaHabitat.innerHTML=""),this.areaAnimal&&(this.areaAnimal.innerHTML=""),this.animalesActuales=[],this.reiniciarPuntos(),this.prepararAnimales(),this.dibujarHabitats(),this.dibujarAnimales(),3==document.querySelector("#puntLocales").innerHTML&&(document.querySelector("#puntLocales").innerHTML=0,this.dibujaPantallaGanado())}}]),d}();var o=document.querySelector("#areaBailando"),p=document.querySelector("#imagen"),q=function(){function c(a){h(this,c),this.estado=a,this.dibujarMono(a)}return l(c,[{key:"dibujarMono",value:function(b){this.estado=b,clearInterval(this.intervalo),0==this.estado?this.dibujoCanvas("../assets/reposo/"):1==this.estado?this.dibujoCanvas("../assets/feliz/"):this.dibujoCanvas("../assets/enojado/")}},{key:"dibujoCanvas",value:function(e){var a=o.getContext("2d");a.clearRect(0,0,350,350);var b=new Image;this.intervalo=setInterval(function(){for(var c=function(c){setTimeout(function(){b.src="".concat(e).concat(c/100,".gif"),b.onload=function(){a.clearRect(0,0,350,350),a.drawImage(b,0,0)}},c)},d=0;1e3>d;d+=100)c(d)},1e3)}}]),c}();for(var r,s=1;9>=s;s++)r=document.createElement("audio"),r.id="snd"+s,r.innerHTML="\n        <source src=\"./assets/animales/sound/s".concat(s,".mp3\" type=\"audio/mpeg\">\n    "),document.querySelector("body").append(r);var i=new q(0),t=new a(i);t.pantallaInicio(),document.querySelector("#nuevoJuego").addEventListener("click",function(){t.iniciarNuevoJuego()}),document.querySelector("#home").addEventListener("click",function(){t.pantallaInicio()})})();